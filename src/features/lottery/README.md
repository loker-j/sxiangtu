# 抽奖模拟器页面设计文档

## 目录结构 
features/lottery/
├── components/ # 抽奖相关的组件
├── hooks/ # 自定义钩子
├── utils/ # 工具函数
├── constants/ # 常量定义
├── types/ # 类型定义
└── README.md # 文档说明

## 页面布局设计

### 1. 导航区域
- 左上角返回主页按钮
  - 位置：固定在左上角
  - 内边距：1rem
  - 图标：简单的返回箭头
  - 文字："返回主页"
  - hover效果：轻微透明度变化

### 2. 标题区域
- 根据不同抽奖类型显示对应标题
  - 惊世抽奖：适用于惊世一、一阶段梯度服
  - 天问抽奖：适用于天问一至天问六
  - 平行服抽奖：体验平行服版本抽奖机制
- 布局细节：
  - 上下内边距：2rem
  - 标题字号：2rem
  - 标题居中显示

### 3. 抽奖结果展示区域
- 位置：页面中央
- 默认状态：
  - 显示空白方框背景
  - 背景样式：
    - 淡色边框
    - 轻微的内部阴影
    - 圆角：12px
    - 最小高度：280px
    - 背景图片和渐变设计（同上）

- 抽奖结果
  - 单抽：
    - 居中显示单个物品
    - 物品卡片尺寸：200px × 200px（正方形）
    - 浮现动画效果
  - 十连：
    - 网格布局（2列×5行）
    - 卡片尺寸：自适应容器宽度
    - 保持正方形比例
    - 卡片间距：8px
    - 依次浮现动画

- 卡片设计：
  - 物品图片：
    - 尺寸：100%填充卡片
    - object-fit: cover（确保填充整个区域）
    - 边框：1px solid var(--color-border)
    - 圆角：4px
    - 点击交互：
      - cursor: pointer
  
  - 数量标识：
    - 位置：右下角绝对定位
    - 尺寸：24px × 24px
    - 背景：rgba(0, 0, 0, 0.8)（黑色方框）
    - 文字：
      - 颜色：#FFFFFF（白色）
      - 字号：14px
      - 字重：bold
      - 居中对齐
    - 圆角：2px（轻微圆角）
    - z-index: 2（确保显示在图片上层）

- 物品详情弹窗：
  - 触发：点击物品图片
  - 显示位置：
    - 固定在抽奖结果展示区域的右上角
    - 位置：
      - top: 1rem
      - right: 1rem
  - 内容：
    - 物品名称
    - 当前数量
  - 样式：
    - 背景：var(--color-card-bg)
    - 边框：1px solid var(--color-border)
    - 圆角：8px
    - 内边距：0.8rem
    - 阴影效果
    - z-index: 1（确保显示在抽奖结上）
  - 关闭方式：点击任意位置关

- 物品图片显示规则：
  - 图片命名规则：与物品名称完全一致
  - 图片路径：assets/items/
  - 图片格式：.png（后续可优化转换为.webp）
  - 示例：
    - 物品"红翡金错" → assets/items/红翡金错.png 
    - 物品"《易筋经》" → assets/items/《易筋经》.png
    - 物品"九曲珠" → assets/items/九曲珠.png
  
  - 图片显示优化：
    - 预加载高频出现物品的图片
    - 使用占位图避免图片加载闪烁
    - 图片加载失败显示默认图片
    - 添加图片加载动画提升体验
    - 考虑将 PNG 转换为 WebP 格式以提升性能：
      - WebP 相比 PNG 可减少约25-35%的文件大小
      - 保持相同的图片质量
      - 需要考虑浏览器兼容性，可提供 PNG 作为降级方案

### 4. 操作按钮区域
- 位置：
  - 统计数据显示时：统计数据区域下方
  - 统计数据隐藏时：抽奖结果展示区域下方
- 按钮布局：
  - 垂直排列
  - 按钮间距：0.8rem
  - 左侧对齐
  - 上下内边距：1rem
  - 左侧内边距：1rem
- 按钮样式：
  - 宽度：120px
  - 高度：44px（保证触摸友好）
  - 圆角：8px
  - 背景：var(--color-card-bg)
  - 边框：1px solid var(--color-border)
  - hover效果：
    - 轻微上浮
    - 背景色过渡
  - 点击效果：
    - 轻微下沉
    - 阴影减弱
- 按钮内容：
  - 单抽按钮（上方）
  - 十连按钮（下方）

### 5. 统计数据控制区域
- 位置：抽奖结果展示区域下方
- 按钮布局：
  - 水平并排显示两个按钮
  - 按钮间距：1rem
  - 上下内边距：1rem
- 按钮样式：
  - 展示/隐藏计数按钮：
    - 文字：根据状态显示"展示计数"/"隐藏计数"
    - 宽度：auto
    - 内边距：0.8rem 1.2rem
    - 背景：var(--color-card-bg)
    - hover效果：背景色过渡
  - 重置计数按钮：
    - 文字："重置计数"
    - 样式同展示/隐藏按钮
    - 点击时显示确认提示

### 6. 统计数据区域
- 状态：默认隐藏
- 显示动画：
  - 展开/收起使用滑动动画
  - 动画时长：300ms
  - 过渡效果：ease-in-out
- 布局结构：
  - 数据展框：
    - 宽度：100%（最大宽度同抽奖结果区域）
    - 最大高度：30vh（限制统计区域高度）
    - 内边距：1rem
    - 背景：var(--color-card-bg)
    - 圆角：8px
    - 边框：1px solid var(--color-border)
    - 溢出处理：auto（内容过多时显示滚动条）
  - 数据内容：
    - 抽奖方式统计：
      - 单抽次数
      - 十连次数
      - 总抽奖次数
    - 物品统计：
      - 惊世/天问服：
        - 金特技次数（高级特技谱-金特技）
        - 紫特技次数（高级特技谱-紫特技）
        - 高级秘籍次数（紫色金色秘笈整本）
        - 篆铭技次数（仅天问服）
        - 红翡金错次数
        - 琉璃缀珠次数
      - 平行服：
        - 金特技次数（开物金色特技碎片）
        - 紫特技次数（开物紫色特技碎片）
        - 高级秘籍次数（紫色金色秘笈整本）
        - 九曲珠次数
        - 照胆镜次数
        - 金笸箩次数
        - 游仙枕次数
        - 照世杯次数
  - 数据项样式：
    - 紧凑布局
    - 行间距：0.5rem（减小间距）
    - 字号：0.9rem
    - 数值使用等宽字体
    - 布局：
      - 左侧为统计项名称
      - 右侧为数值
      - 使用 justify-content: space-between 对齐

### 7. 整体页面布局
- 页面容器：
  - 最大宽度：480px
  - 水平居中显示
  - 高度：100vh（视口高度）
  - 内边距：
    - 左右：1rem（移动端）/ 2rem（桌面端）
    - 顶部：1rem
    - 底部：1rem

- 响应式布局：
  - 移动端（< 480px）：
    - 容器宽度：100%
    - 内容完全填充
  - 桌面端（>= 480px）：
    - 容器宽度：固定 480px
    - 居中显示
    - 两侧留白

- 内容布局流：
  1. 返回按钮（固定在左上角）
  2. 标题区域（居中，精简高度）
  3. 抽奖结果展示区域（自适应高度）
  4. 统计数据控制按钮（紧凑布局）
  5. 统计数据区域（可折叠，展开时压缩其他区域）
  6. 抽奖操作按钮（固定高度）

- 布局特点：
  - 采用 flex 布局实现垂直排列
  - 各区域高度合理分配
  - 避免内容溢出视口
  - 保持紧凑但清晰的视觉层次
  - 确保所有内容在一屏内完整显示

## 需要考虑的重要事项

### 1. 数据管理
- 抽奖配置数据
  - 各类型物品及其概率
  - 保底机制规则
  - 物品图片源
- 统计数据持久化
  - 本地存储方案
  - 数据清理机制

### 2. 动画效果
- 抽奖过程动画
  - 抽奖开始效果
  - 卡片翻转/出现动画
  - 稀有物品特效
- 转场动画
  - 页面切换效果
  - 统计框展开/收起

### 3. 交互优化
- 抽奖过程中按钮状态
  - 防止重复点击
  - loading状态显示
- 响应式适配
  - 移动端布局优化
  - 触摸操作优化
- 快速抽奖模式
  - 跳过动画选项
  - 快速展示结果

### 4. 性能优化
- 图片资源加载
  - 预加载常用图片
  - 懒加非要资源
- 动画性能
  - 使用GPU加速
  - 优化重绘和重排
- 数据处理
  - 批量处理十连抽奖
  - 优化统计计算

### 5. 错误处理
- 图片加载失败处理
- 概率计算异常处理
- 数据存储失败处理

### 6. 可访问性
- 键盘操作支持
- 屏幕阅读器支持
- 合适的颜色对比度

### 7. 用户体验
- 保底进度提示
- 稀有物品出现概率提示
- 历史记录查看
- 抽奖结果分享功能

### 8. 主题设计
- 与首页保持一致的水墨风格
- 动画效果符合东方美学
- 音效设计（可选）

### 9. 测试考虑
- 概率验证测试
- 动画性能测试
- 响应式布局测试
- 用户操作测试

## 后续扩展可能
- 抽奖记录导出
- 概率统计分析
- 自定义抽奖配置
- 多语言支持

## 抽奖概率设计

### 1. 惊世抽奖概率分布

#### 基础概率表
- 金色装备合成材料：46.41%
  - 子物品概率（互斥）：
    - 红翡金错：30%（单次掉落固定1个）
    - 琉璃缀珠：70%（单次掉落固定2个）
- 紫色金色秘笈碎片：8.75%
  - 子物品概率（均等）：
    - 固定掉落4个碎片的秘笈：
      - 《祝由术》碎片
      - 《六爻道》碎片
      - 《香溢江湖》碎片
      - 《菩提心影录》碎片
      - 《四照神功》碎片
      - 《天合》碎片
      - 《扶鸾术》碎片
      - 《错影虚尘》碎片
      - 《沅湘》碎片
      - 《握奇八法》碎片
      - 《招魂》碎片
    - 固定掉落1个碎片的秘笈：
      - 《清风诀》碎片
      - 《清寒决》碎片
      - 《易筋经》碎片
      - 《金刚经》碎片
      - 《微风扶铃》碎片
      - 《梦境江湖》碎片
      - 《太极劲》碎片
      - 《混元功》碎片
      - 《血刀决》碎片
      - 《坚毅》碎片
      - 《金刚怒目》碎片
      - 《无相神功》碎片
      - 《湛露决》碎片
      - 《行露决》碎片
      - 《贞龟卜辞》碎片
      - 《落阴术》碎片
      - 《清水决》碎片
      - 《心经》碎片
      - 《清荷引梦》碎片
      - 《逍遥游》碎片
      - 《先天功》碎片
      - 《结发受长生》碎片
      - 《三危玉策》碎片
      - 《焚烛真经》碎片
      - 《摩罗偈》碎片
      - 《折枷沐雨》碎片
      - 《春秋代序》碎片
      - 《九韶乐》碎片
      - 《岁末晏》碎片
      - 《龙鸣铎》碎片
      - 《回雁诀》碎片
      - 《虎钤经》碎片
      - 《极巫溟》碎片
      - 《观祯行》碎片
      - 《娲皇遗音》碎片
- 蓝色秘笈碎片：3.41%
  - 子物品概率（均等）：
    - 《神脉经》碎片（固定掉落25个）
    - 《五岳神定》碎片（固定掉落25个）
    - 《苦禅》碎片（固定掉落25个）
    - 《销魂天佛》碎片（固定掉落25个）
    - 《毒经》碎片（固定掉落25个）
    - 《明玉功》碎片（固定掉落25个）
- 白绿蓝色秘笈整本：18.15%
  - 子物品概率（均等）：
    - 固定掉落4本的秘笈：
      - 《钢刃》
      - 《铁布衫》
      - 《岐黄之术》
      - 《武当武籍》
      - 《暗香武籍》
      - 《少林武籍》
      - 《华山武籍》
      - 《云梦武籍》
      - 《关山武籍》
      - 《大巫武籍》
      - 《沧海武籍》
      - 《太阴武籍》
      - 《伽蓝武籍》
      - 《泠音武籍》
    - 固定掉落2本的秘笈：
      - 《金刚伏魔咒》
      - 《道藏风止》
      - 《七伤心法》
      - 《静心咒》
      - 《苗家刀法》
      - 《穿心掌法》
      - 《拈花指法》
    - 固定掉落1本的秘笈：
      - 《苦禅》
      - 《五岳神定》
      - 《神脉经》
      - 《销魂天佛》
      - 《毒经》
      - 《明玉功》
- 紫色金色秘笈整本：0.13%
  - 子物品概率（均等，均固定掉落1本）：
    - 《小无相功》
    - 《玄冥心》
    - 《嫁衣神功》
    - 《清心诀》
    - 《洗髓经》
    - 《祝由术》
    - 《六爻道》
    - 《香溢江湖》
    - 《菩提心影录》
    - 《四照神功》
    - 《天合》
    - 《扶鸾术》
    - 《清风诀》
    - 《清寒决》
    - 《易筋经》
    - 《金刚经》
    - 《微风扶铃》
    - 《梦境江湖》
    - 《太极劲》
    - 《混元功》
    - 《血刀决》
    - 《坚毅》
    - 《金刚怒目》
    - 《无相神功》
    - 《湛露决》
    - 《行露决》
    - 《贞龟卜辞》
    - 《落阴术》
    - 《清水决》
    - 《心经》
    - 《清荷引梦》
    - 《逍遥游》
    - 《先天功》
    - 《结发受长生》
    - 《三危玉策》
    - 《焚烛真经》
    - 《错影虚尘》
    - 《摩罗偈》
    - 《折枷沐雨》
    - 《春秋代序》
    - 《九韶乐》
    - 《岁末晏》
    - 《沅湘》
    - 《龙鸣铎》
    - 《回雁诀》
    - 《虎钤经》
    - 《握奇八法》
    - 《招魂》
    - 《极巫溟》
    - 《观祯行》
    - 《娲皇遗音》
- 整件金装：0.76%
  - 子物品概率（均等，均固定掉落1个）：
    - 60级金装发冠
    - 60级金装衣服
    - 60级金装下装
    - 60级金装腰带
- 高级特技谱：0.04%
  - 金特技（30%概率）：
    - 子物品概率（均等，均固定掉落1个）：
      - 压制
      - 先发制人
      - 镇海冲云
      - 金刚护体
      - 固若金汤
      - 背水
      - 金钟罩
      - 嗜血
      - 噬心
      - 遗忘
      - 偷袭
  - 紫特技（70%概率）：
    - 子物品概率（均等，均固定掉落1个）：
      - 无妄无我
      - 神力·外
      - 踏雪无痕
      - 神力·内
      - 惊鸿
      - 攻守兼备
      - 妙手
      - 缚足
      - 虚弱
      - 暴虐
- 银票宝箱：1.20%（固定掉落1个）
- 一袋银两：2.84%（固定掉落4个）
- 一袋铜钱：2.27%（固定掉落4个）
- 帮派金匣：0.95%（固定掉落1个）
- 高级洗练材料：9.09%
  - 子物品概率（均等）：
    - 高级萃石（固定掉落80个）
    - 高级萃玉（固定掉落2个）
- 各品质南柯石：6.00%
  - 子物品概率（均等）：
    - 南柯石·极（固定掉落1个）
    - 南柯石·珍（固定掉落1个）
    - 南柯石·凡（固定掉落8个）
    - 南柯石·普（固定掉落40个）

#### 概率计算机制
1. 多级概率计算：
   - 第一级：根据基础概率表抽取物品类别
   - 第二级：在选中类别内进行子物品类型抽取
   - 第三级：（如果存在）在选中的子物品类型中抽取具体物品
   - 示例流程：
     1. 首先判定是否命中"高级特技谱"（0.04%）
     2. 如果命中，再判定特技品质（金特技30% 或 紫特技70%）
     3. 最后在对应品质的特技池中随机抽取具体特技
   
2. 金色装备合成材料详细概率（两级示例）：
   - 总概率：46.41%
   - 实际掉落概率与数量：
     - 红翡金错：46.41% × 30% = 13.923%（固定掉落1个）
     - 琉璃缀珠：46.41% × 70% = 32.487%（固定掉落2个）

#### 概率特点
1. 主要掉落分布：
   - 高概率物品（>10%）：
     - 金色装备合成材料（46.41%）
     - 白绿蓝色秘笈整本（18.15%）
   
   - 中等概率物品（1-10%）：
     - 高级洗练材料（9.09%）
     - 紫色金色秘笈碎片（8.75%）
     - 各品质南柯石（6.00%）
     - 蓝色秘笈碎片（3.41%）
     - 一袋银两（2.84%）
     - 一袋铜钱（2.27%）
     - 银票宝箱（1.20%）

   - 低概率物品（<1%）：
     - 帮派金匣（0.95%）
     - 整件金装（0.76%）
     - 紫色金色秘笈整本（0.13%）
     - 高级特技谱（0.04%）

2. 概率分布特征：
   - 总概率：100%
   - 最高概率：46.41%（金色装合成材料）
   - 最低概率：0.04%（高级特技谱）
   - 稀有物品概率总和：约1.88%（整件金装、紫色金色秘笈整本、高级特技谱）

### 2. 天问抽奖概率分布

#### 基础概率表
- 金色装备合成材料：46.41%
  - 子物品概率互斥）：
    - 红翡金错：30%（单次掉落固定1个）
    - 琉璃缀珠：70%（单次掉落固定2个）
- 紫色金色秘笈碎片：8.75%
  - 子物品概率（均等）：
    - 固定掉落4个碎片的秘笈：
      - 《祝由术》碎片
      - 《六爻道》碎片
      - 《香溢江湖》碎片
      - 《菩提心影录》碎片
      - 《四照神功》碎片
      - 《天合》碎片
      - 《扶鸾术》碎片
      - 《错影虚尘》碎片
      - 《沅湘》碎片
      - 《握奇八法》碎片
      - 《招魂》碎片
    - 固定掉落1个碎片的秘笈：
      - 《清风诀》碎片
      - 《清寒决》碎片
      - 《易筋经》碎片
      - 《金刚经》碎片
      - 《微风扶铃》碎片
      - 《梦境江湖》碎片
      - 《太极劲》碎片
      - 《混元功》碎片
      - 《血刀决》碎片
      - 《坚毅》碎片
      - 《金刚怒目》碎片
      - 《无相神功》碎片
      - 《湛露决》碎片
      - 《行露决》碎片
      - 《贞龟卜辞》碎片
      - 《落阴术》碎片
      - 《清水决》碎片
      - 《心经》碎片
      - 《清荷引梦》碎片
      - 《逍遥游》碎片
      - 《先天功》碎片
      - 《结发受长生》碎片
      - 《三危玉策》碎片
      - 《焚烛真经》碎片
      - 《摩罗偈》碎片
      - 《折枷沐雨》碎片
      - 《春秋代序》碎片
      - 《九韶乐》碎片
      - 《岁末晏》碎片
      - 《龙鸣铎》碎片
      - 《回雁诀》碎片
      - 《虎钤经》碎片
      - 《极巫溟》碎片
      - 《观祯行》碎片
      - 《娲皇遗音》碎片
- 蓝色秘笈碎片：3.41%
  - 子物品概率（均等）：
    - 《神脉经》碎片（固定掉落25个）
    - 《五岳神定》碎片（固定掉落25个）
    - 《苦禅》碎片（固定掉落25个）
    - 《销魂天佛》碎片（固定掉落25个）
    - 《毒经》碎片（固定掉落25个）
    - 《明玉功》碎片（固定掉落25个）
- 白绿蓝色秘笈整本：18.15%
  - 子物品概率（均等）：
    - 固定掉落4本的秘笈：
      - 《钢刃》
      - 《铁布衫》
      - 《岐黄之术》
      - 《武当武籍》
      - 《暗香武籍》
      - 《少林武籍》
      - 《华山武籍》
      - 《云梦武籍》
      - 《关山武籍》
      - 《大巫武籍》
      - 《沧海武籍》
      - 《太阴武籍》
      - 《伽蓝武籍》
      - 《泠音武籍》
    - 固定掉落2本的秘笈：
      - 《金刚伏魔咒》
      - 《道藏风止》
      - 《七伤心法》
      - 《静心咒》
      - 《苗家刀法》
      - 《穿心掌》
      - 《拈花指法》
    - 固定掉落1本的秘笈：
      - 《苦禅》
      - 《五岳神定》
      - 《神脉经》
      - 《销魂天佛》
      - 《毒经》
      - 《明玉功》
- 紫色金色秘笈整本：0.13%
  - 子物品概率（均等，均固定掉落1本）：
    - 《小无相功》
    - 《玄冥心曲》
    - 《嫁衣神功》
    - 《清心诀》
    - 《洗髓经》
    - 《祝由术》
    - 《六爻道》
    - 《香溢江湖》
    - 《菩提心影录》
    - 《四照神功》
    - 《天合》
    - 《扶鸾术》
    - 《清风诀》
    - 《清寒决》
    - 《易筋经》
    - 《金刚经》
    - 《微风扶铃》
    - 《梦境江湖》
    - 《太极劲》
    - 《混元功》
    - 《血刀决》
    - 《坚毅》
    - 《金刚怒目》
    - 《无相神功》
    - 《湛露决》
    - 《行露决》
    - 《贞龟卜辞》
    - 《落阴术》
    - 《清水决》
    - 《心经》
    - 《清荷引梦》
    - 《逍遥游》
    - 《先天功》
    - 《结发受长生》
    - 《三危玉策》
    - 《焚烛真经》
    - 《错影虚尘》
    - 《摩罗偈》
    - 《折枷沐雨》
    - 《春秋代序》
    - 《九韶乐》
    - 《岁末晏》
    - 《沅湘》
    - 《龙鸣铎》
    - 《回雁诀》
    - 《虎钤经》
    - 《握奇八法》
    - 《招魂》
    - 《极巫溟》
    - 《观祯行》
    - 《娲皇遗音》
- 整件金装：0.76%
  - 子物品概率（均等，均固定掉落1个）：
    - 60级金装发冠
    - 60级金装衣服
    - 60级金装下装
    - 60级金装腰带
- 高级特技谱：0.04%
  - 金特技（30%概率）：
    - 子物品概率（均等，均固定掉落1个）：
      - 压制
      - 先发制人
      - 镇海冲云
      - 金刚护体
      - 固若金汤
      - 背水
      - 金钟罩
      - 嗜血
      - 噬心
      - 遗忘
      - 偷袭
  - 紫特技（70%概率）：
    - 子物品概率（均等，均固定掉落1个）：
      - 无妄无我
      - 神力·外
      - 踏雪无痕
      - 神力·内
      - 惊鸿
      - 攻守兼备
      - 妙手
      - 缚足
      - 虚弱
      - 暴虐
- 银票宝箱：1.20%（固定掉落1个）
- 一袋银两：2.84%（固定掉落4个）
- 一袋铜钱：1.77%（固定掉落4个）
- 帮派金匣：0.95%（固定掉落1个）
- 高级洗练材料：5.59%
  - 子物品概率（均等）：
    - 高级萃石（固定掉落80个）
    - 高级萃玉（固定掉落2个）
- 各品质南柯石：2.50%
  - 子物品概率（均等）：
    - 南柯石·极（固定掉落1个）
    - 南柯石·珍（固定掉落1个）
    - 南柯石·凡（固定掉落8个）
    - 南柯石·普（固定掉落40个）
- 皓魄石：2.17%（固定掉落3个）
- 四星单金条目奉天玉：0.30%（固定掉落1个）
- 紫色篆铭技：0.03%
  - 子物品概率（均等，均固定掉落1个）：
    - 诸恨苦
    - 青云心
    - 迁尘骨
    - 入祸门
    - 孤峰煞
    - 剑歌·
    - 剑歌·外
    - 剑歌·内
    - 霹雳·内
    - 霹雳·外
    - 行如虹
    - 自峥嵘
- 珍品极品一招之见：2.50%
  - 子物品概率（互斥）：
    - 一招之见·极：45%（固定掉落1个）
    - 一招之见·珍：55%（固定掉落1个）
- 梦崽的海螺：2.50%（固定掉落1个）

#### 概率特点
1. 主要掉落分布：
   - 高概率物品（>10%）：
     - 金色装备合成材料（46.41%）
     - 白绿蓝色秘笈整本（18.15%）
   
   - 中等概率物品（1-10%）：
     - 紫色金色秘笈碎片（8.75%）
     - 高级洗练材料（5.59%）
     - 蓝色秘笈碎片（3.41%）
     - 一袋银两（2.84%）
     - 各品质南柯石（2.50%）
     - 珍品极品一招之见（2.50%）
     - 梦崽的海螺（2.50%）
     - 皓魄石（2.17%）
     - 一袋铜钱（1.77%）
     - 银票宝箱（1.20%）

   - 低概率物品（<1%）：
     - 帮派金匣（0.95%）
     - 整件金装（0.76%）
     - 四星单金条目奉天玉（0.30%）
     - 紫色金色秘笈整本（0.13%）
     - 高级特技谱（0.04%）
     - 紫色篆铭技（0.03%）

### 3. 平行服抽奖概率分布

#### 基础概率表
- 金色装备合成材料：49.41%
  - 子物品概率：
    - 普通材料（70%）：
      - 琉璃缀珠：70%（固定掉落2个）
      - 红翡金错：30%（固定掉落1个）
    - 稀有材料（30%，均等概率，均固定掉落1个）：
      - 九曲珠
      - 照胆镜
      - 金笸箩
      - 游仙枕
      - 照世杯

- 蓝色秘笈碎片：18.15%
  - 子物品概率（均等概率）：
    - 《神脉经》碎片（固定掉落25个）
    - 《五岳神定》碎片（固定掉落25个）
    - 《苦禅》碎片（固定掉落25个）
    - 《销魂天佛》碎片（固定掉落25个）
    - 《毒经》碎片（固定掉落25个）
    - 《明玉功》碎片（固定掉落25个）

- 紫色金色秘笈碎片：9.09%
  - 子物品概率：
    - 固定掉落4个碎片的秘笈（均等概率）：
      - 《小无相功》碎片
      - 《玄冥心曲》碎片
      - 《嫁衣神功》碎片
      - 《清心诀》碎片
      - 《洗髓经》碎片
      - 《祝由术》碎片
      - 《六爻道》碎片
      - 《香溢江湖》碎片
      - 《菩提心影录》碎片
      - 《四照神功》碎片
      - 《天合》碎片
      - 《扶鸾术》碎片
    - 固定掉落1个碎片的秘笈（均等概率）：
      - 《清风诀》碎片
      - 《清寒决》碎片
      - 《易筋经》碎片
      - 《金刚经》碎片
      - 《微风扶铃》碎片
      - 《梦境江湖》碎片
      - 《太极劲》碎片
      - 《混元功》碎片
      - 《血刀决》碎片
      - 《坚毅》碎片
      - 《金刚怒目》碎片
      - 《无相神功》碎片
      - 《湛露决》碎片
      - 《行露决》碎片
      - 《贞龟卜辞》碎片
      - 《落阴术》碎片
      - 《清水决》碎片
      - 《心经》碎片
      - 《清荷引梦》碎片
      - 《逍遥游》碎片
      - 《先天功》碎片
      - 《结发受长生》碎片
      - 《三危玉策》碎片

- 紫色金色秘笈整本：0.11%
  - 子物品概率（均等概率，固定掉落一本）：
      - 《小无相功》
      - 《玄冥心曲》
      - 《嫁衣神功》
      - 《清心诀》
      - 《洗髓经》
      - 《祝由术》
      - 《六爻道》
      - 《香溢江湖》
      - 《菩提心影录》
      - 《四照神功》
      - 《天合》
      - 《扶鸾术》
      - 《清风诀》
      - 《清寒决》
      - 《易筋经》
      - 《金刚经》
      - 《微风扶铃》
      - 《梦境江湖》
      - 《太极劲》
      - 《混元功》
      - 《血刀决》
      - 《坚毅》
      - 《金刚怒目》
      - 《无相神功》
      - 《湛露决》
      - 《行露决》
      - 《贞龟卜辞》
      - 《落阴术》
      - 《清水决》
      - 《心经》
      - 《清荷引梦》
      - 《逍遥游》
      - 《先天功》
      - 《结发受长生》
      - 《三危玉策》

- 特技相关：3.41%
  - 开物紫色特技碎片：70%（固定掉落1个）
  - 开物金色特技碎片：30%（固定掉落1个）

- 货币道具：6.04%
  - 一袋银钞：70%（固定掉落1个）
  - 100万铜钱：30%（固定掉落1个）

- 高级洗练材料：11.68%
  - 高级萃石：100%（固定掉落60个）

- 天工材料：2.11%
  - 天工奇石：100%（固定掉落3个）

#### 概率特点
1. 主要掉落分布：
   - 高概率物品（>10%）：
     - 金色装备合成材料（49.41%）
     - 蓝色秘笈碎片（18.15%）
     - 高级洗练材料（11.68%）
   
   - 中等概率物品（1-10%）：
     - 紫色金色秘笈碎片（9.09%）
     - 货币道具（6.04%）
     - 特技相关（3.41%）
     - 天工材料（2.11%）

   - 低概率物品（<1%）：
     - 稀有金装材料（约0.3%每种）
     - 紫色金色秘笈整本（0.11%）

### 4. 抽奖机制设计

#### 基础抽奖机制
1. 概率区间划分
   - 根据概率表划分0-1之间的区间
   - 例如：
     - 0 ~ 0.4641        → 金色装备合成材料
     - 0.4641 ~ 0.6456   → 蓝色秘笈碎片
     - 0.6456 ~ 0.7331   → 紫色金色秘笈碎片
     - ...以此类推

2. 单抽流程
   - 生成0-1之间的随机数
   - 判断随机数落在哪个概率区间
   - 确定抽中的物品类别
   - 如果该类别有子物品，再次随机选择具体物品
   - 按照固定掉落数量返回结果

3. 十连抽机制
   - 执行10次完全独立的单抽
   - 每次抽奖使用相同的概率机制
   - 统一返回10次抽奖结果

4. 注意事项
   - 每次抽奖相互独立
   - 概率固定不变
   - 无保底机制
   - 固定掉落数量不会改变

5. 稀有物品提示
   - 触发条件：抽中低概率物品（<1%）
   - 提示内容：
     - 标题：恭喜抽中稀有物品
     - 内容：物品名称 x 数量
   - 显示方式：弹窗提示
   - 适用物品：
     - 整件金装
     - 紫色金色秘笈整本
     - 高级特技谱
     - 紫色篆铭技
     - 四星单金条目奉天玉

### 5. 数据存储设计

#### 本地存储实现
1. 存储方式
   - 使用 LocalStorage
   - 按抽奖类型分别存储
   - 存储键名设计：
     - lottery_history_jingshi（惊世）
     - lottery_history_tianwen（天问）
     - lottery_history_pingxing（平行服）

2. 数据结构
   - 使用 JSON 格式存储数据
   - 每条记录包含唯一 ID、抽奖时间戳、抽奖类型、抽奖方式、抽中物品详情、是否为稀有物品
   - 存储限制
     - 每种抽奖类型最多保存1000条记录
     - 超出限制时自动删除最早记录
     - 预估单条记录大小：约200字节
     - 总存储空间约：600KB
   - 异常处理
     - 存储空间不足提示
     - 数据格式错误处理
     - 存储失败后的重试机制

### 6. 性能优化策略

#### 1. 资源加载优化
- 图片资源优化：
  - 使用 WebP 格式图片
  - 根据设备分辨率选择合适尺寸的图片
  - 预加载常用物品图片
  - 懒加载非首屏图片

- 代码优化：
  - 路由懒加载
  - 组件按需加载
  - Tree-shaking 移除未使用代码

#### 2. 动画性能优化
- 使用 CSS transform 代替位置属性
- 使用 will-change 提示浏览器优化
- 避免同时触发过多动画
- 使用 requestAnimationFrame 实现流畅动画
- 长列表使用虚拟滚动

#### 3. 渲染性能优化
- 减少重排重绘：
  - 批量修改 DOM
  - 使用 Fragment 减少 DOM 操作
  - 使用 CSS contain 属性
- 优化渲染时机：
  - 使用 React.memo 避免不必要的重渲染
  - 合理使用 useMemo 和 useCallback
  - 及时清理不需要的副作用

#### 4. 数据处理优化
- 本地数据处理：
  - 批量处理抽奖结果
  - 使用 Web Worker 处理大量数据
  - 分页加载历史记录
- 缓存优化：
  - 缓存常用配置数据
  - 合理使用 LocalStorage
  - 及时清理过期数据